{% extends 'patients/base.html' %}

{% block head %}
    <script type="text/javascript">
        google.charts.load('current', {'packages':['corechart']});
        google.charts.setOnLoadCallback(drawChart);

        {% load filter_tags %}
        {% with signal_list=object.proper_signal.read|split_by_newline|convert_list_to_int|convert_to_charts %}

        function drawChart() {
            var data = new google.visualization.DataTable();

            data.addColumn('number', 'Time');
            data.addColumn('number', '');

            data.addRows(
                {{ signal_list }}
            );

            var options = {
                title: 'Proper muscle EMG signal',
                hAxis: {
                    title: 'Time',
                    logScale: false
                },
                vAxis: {
                    title: 'EMG [A.U.]',
                    logScale: false
                },
                curveType: 'function',
                legend: 'none'
             };

            var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

            chart.draw(data, options);
         }
            {% endwith %}
    </script>
{% endblock %}

{% block content %}
    <h1 class="my-4">Proper muscles chart -
        <small>{{ object.name }}</small>
    </h1>
    <div class="row">
        <div class="col-12">
            <ul class="list-group">
              <li class="list-group-item"><strong>Name:</strong> {{ object.name }}</li>
              <li class="list-group-item"><strong>Description:</strong> {{ object.description }}</li>
{#            {% load filter_tags %}#}
{#            {% with signal_list=object.proper_signal.read|split_by_newline|convert_list_to_int %}#}
{##}
{#                <li class="list-group-item"><strong>Test: </strong> {{ signal_list }}</li>#}
{#                <li class="list-group-item"><strong>Maximal value:</strong> {{ signal_list|get_max_value }}</li>#}
{#                <li class="list-group-item"><strong>Minimal value:</strong> {{ signal_list|get_min_value }}</li>#}
{#            {% endwith %}#}
            </ul>
        </div>
    <div id="curve_chart" style="width: 900px; height: 500px"></div>

    </div>

{% endblock %}